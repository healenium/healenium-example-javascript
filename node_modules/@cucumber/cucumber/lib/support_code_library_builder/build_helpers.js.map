{"version":3,"file":"build_helpers.js","sourceRoot":"","sources":["../../src/support_code_library_builder/build_helpers.ts"],"names":[],"mappings":";;;;;;AAAA,yEAA8D;AAC9D,gDAAuB;AACvB,kEAAsC;AACtC,8DAA4D;AAC5D,oDAAgE;AAIhE,SAAgB,uBAAuB,CAAC,GAAW;IACjD,IAAI,IAAY,CAAA;IAChB,IAAI,GAAW,CAAA;IACf,IAAI;QACF,MAAM,WAAW,GAAG,uBAAU,CAAC,OAAO,EAAE,CAAA;QACxC,MAAM,UAAU,GAAG,WAAW,CAAC,IAAI,CAAC,CAAC,KAAK,EAAE,EAAE;YAC5C,OAAO,CAAC,yCAAoB,CAAC,KAAK,CAAC,WAAW,EAAE,CAAC,CAAA;QACnD,CAAC,CAAC,CAAA;QACF,IAAI,UAAU,IAAI,IAAI,EAAE;YACtB,IAAI,GAAG,UAAU,CAAC,aAAa,EAAE,CAAA;YACjC,GAAG,GAAG,UAAU,CAAC,WAAW,EAAE,CAAA;YAC9B,IAAI,6BAAa,CAAC,GAAG,CAAC,EAAE;gBACtB,GAAG,GAAG,cAAI,CAAC,QAAQ,CAAC,GAAG,EAAE,GAAG,CAAC,CAAA;aAC9B;SACF;KACF;IAAC,OAAO,CAAC,EAAE;QACV,OAAO,CAAC,IAAI,CAAC,gDAAgD,EAAE,CAAC,CAAC,CAAA;KAClE;IACD,OAAO;QACL,IAAI,EAAE,8BAAc,CAAC,IAAI,EAAE,CAAC,CAAC;QAC7B,GAAG,EAAE,8BAAc,CAAC,GAAG,EAAE,SAAS,CAAC;KACpC,CAAA;AACH,CAAC;AAtBD,0DAsBC;AAED,SAAgB,kBAAkB,CAAC,EACjC,IAAI,EACJ,MAAM,EACN,WAAW,EACX,cAAc,EACd,oBAAoB,GACU;IAC9B,IAAI,OAAO,cAAc,KAAK,SAAS;QAAE,cAAc,GAAG,IAAI,CAAA;IAC9D,IAAI,OAAO,oBAAoB,KAAK,SAAS;QAAE,oBAAoB,GAAG,KAAK,CAAA;IAC3E,OAAO,IAAI,oCAAa,CACtB,IAAI,EACJ,MAAM,EACN,IAAI,EACJ,WAAW,EACX,cAAc,EACd,oBAAoB,CACrB,CAAA;AACH,CAAC;AAjBD,gDAiBC","sourcesContent":["import { ParameterType } from '@cucumber/cucumber-expressions'\nimport path from 'path'\nimport StackTrace from 'stacktrace-js'\nimport { isFileNameInCucumber } from '../stack_trace_filter'\nimport { doesHaveValue, valueOrDefault } from '../value_checker'\nimport { ILineAndUri } from '../types'\nimport { IParameterTypeDefinition } from './types'\n\nexport function getDefinitionLineAndUri(cwd: string): ILineAndUri {\n  let line: number\n  let uri: string\n  try {\n    const stackframes = StackTrace.getSync()\n    const stackframe = stackframes.find((frame) => {\n      return !isFileNameInCucumber(frame.getFileName())\n    })\n    if (stackframe != null) {\n      line = stackframe.getLineNumber()\n      uri = stackframe.getFileName()\n      if (doesHaveValue(uri)) {\n        uri = path.relative(cwd, uri)\n      }\n    }\n  } catch (e) {\n    console.warn('Warning: unable to get definition line and uri', e)\n  }\n  return {\n    line: valueOrDefault(line, 0),\n    uri: valueOrDefault(uri, 'unknown'),\n  }\n}\n\nexport function buildParameterType({\n  name,\n  regexp,\n  transformer,\n  useForSnippets,\n  preferForRegexpMatch,\n}: IParameterTypeDefinition<any>): ParameterType<any> {\n  if (typeof useForSnippets !== 'boolean') useForSnippets = true\n  if (typeof preferForRegexpMatch !== 'boolean') preferForRegexpMatch = false\n  return new ParameterType(\n    name,\n    regexp,\n    null,\n    transformer,\n    useForSnippets,\n    preferForRegexpMatch\n  )\n}\n"]}